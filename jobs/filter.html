<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <!-- CSS only -->
    <link href="https://govfresh.com/css/style.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-    gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>

<body>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"
        integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>

    <div class="container mt-2">
        <div class="row">
            <div class="col-sm-3">
                <p>
                    <label for="keywords">Keywords (; separated)</label>
                    <br>
                    <input name="keywords" placeholder="Keywords" param="Keyword">
                </p>
                <p>
                    <label for="title">Title</label>
                    <br>
                    <input name="title" placeholder="Job title" param="PositionTitle">
                </p>
                <p>
                    <label for="location">Location</label>
                    <br>
                    <input name="location" placeholder="Job location" param="LocationName">
                    <label for="radius">Radius: <span class="radius">1500</span> miles</label>
                    <br>
                    <input type="range" name="radius" max="3000" style="width: 100%;"
                        onchange="document.querySelector('.radius').innerText = this.value;" param="Radius">
                </p>
            </div>
            <div class="col-sm-3">
                <div>
                    <p>
                        <label for="orgs">Organizations (; separated) <a href="------------------">list</a></label>
                        <input placeholder="Organizations" name="orgs" param="Organization">
                    </p>
                    <form param="PositionSensitivity" offset="1">
                        Sensitivity/risk
                        <div class="form-check">
                            <input type="checkbox" name="ns">
                            <label for="ns">Non-sensitive/low risk</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="ncs">
                            <label for="ncs">Noncritical-sensitive/moderate</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="cs">
                            <label for="cs">Critical-sensitive/high risk</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="ss">
                            <label for="ss">Special-sensitive/high risk</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="moderate">
                            <label for="moderate">Moderate risk</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="high">
                            <label for="high">High risk</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="ncs-high">
                            <label for="ncs-high">Noncritical-sensitive/high</label>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-sm-3">
                <form param="PositionScheduleTypeCode" offset="1">
                    Schedule
                    <div class="form-check">
                        <input type="checkbox" name="full">
                        <label for="full">Full-time</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" name="part">
                        <label for="full">Part-time</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" name="shift">
                        <label for="shift">Shift work</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" name="intermittent">
                        <label for="full">Intermittent</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" name="sharing">
                        <label for="sharing">Job sharing</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" name="multiple">
                        <label for="multiple">Multiple schedules</label>
                    </div>
                </form>
                <div>
                    <input type="checkbox" name="relocation" param="RelocationIndicator">
                    <label for="relocation">Relocation okay?</label>
                </div>
                <div>
                    <input type="checkbox" name="remote" param="RemoteIndicator">
                    <label for="remote">Remote work</label>
                </div>
                <p>
                    <label for="travel">Travelling <span class="travel-percent">50</span>% of time</label>
                    <input type="range" step="12.5" style="width: 100%" name="travel" param="TravelPercentage" onchange="
                        let value = this.value;
                        if (value == 0) {}
                        else if (value <= 12.5)
                            value = 1;
                        else if (value <= 25)
                            value = 2;
                        else if (value <= 50)
                            value = 5;                                                                                                 
                        else if (value <= 75)
                            value = 7;
                        else
                            value = 8;
                        this.setValue = value; 
                        document.querySelector('span.travel-percent').innerText = this.value;">
                </p>
            </div>
            <div class="col-sm-3">
                <div>
                    <form param="SecurityClearanceRequired">
                        Security clearance
                        <div class="form-check">
                            <input type="checkbox" name="none">
                            <label for="none">None</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="confidential">
                            <label for="confidential">Confidential</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="secret">
                            <label for="secret">Secret</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="top-secret">
                            <label for="top-secret">Top secret</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="sci">
                            <label for="sci">Sensitive comparted information</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="q">
                            <label for="q">Q access</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="l">
                            <label for="l">L access</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" name="other">
                            <label for="other">Other</label>
                        </div>
                    </form>
                </div>
                <div class="apply">
                    <a class="float-end btn btn-primary">Apply changes</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        window.onload = function () {
            console.log('load')
            const params = new URLSearchParams(location.search);
            params.forEach((value, key) => {
                const input = document.querySelector('input[param="' + key + '"]');
                if (input)
                    if (input.type == 'checkbox')
                        input.checked = value;
                    else {
                        input.value = value;
                        input.onchange();
                    }
                else {
                    const form = document.querySelector('form[param="' + key + '"]');
                    if (form) {
                        const checkboxes = form.querySelectorAll('input[type="checkbox"]');
                        value.split(';').slice(0, -1).forEach(value => {
                            checkboxes[parseInt(value)].checked = true;
                        });
                    }
                }
            });
        };

        document.querySelector('div.apply').onclick = function () {
            let params = new URLSearchParams(location.search);

            document.querySelectorAll('input:not(form input)').forEach(input => {
                input.param = input.getAttribute('param');
                params.delete(input.param);

                const value = (input.type != 'checkbox') ? input.value : input.checked;

                if (value)
                    params.append(input.param, value);
            });

            document.querySelectorAll('form').forEach(form => {
                form.param = form.getAttribute('param');
                params.delete(form.param);

                let value = '';
                const checkboxes = form.querySelectorAll('input[type="checkbox"]');
                for (let i = 0; i < checkboxes.length; i++)
                    if (checkboxes[i].checked)
                        value += i + (parseInt(form.offset) || 0) + ';';

                if (value)
                    params.append(form.param, value);
            });

            location.search = params;
        }
    </script>

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
        crossorigin="anonymous"></script>
</body>

</html>